<html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¥åº·è¿½è¸ª - é¥®é£Ÿçƒ­é‡ç®¡ç†åº”ç”¨</title>
  <!-- Tailwind CSS v3 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <!-- ç»Ÿä¸€çš„ Tailwind é…ç½® -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#22c55e',
            secondary: '#16a34a',
            tertiary: '#86efac',
            dark: '#1e293b',
            light: '#f8fafc',
            'primary-light': '#dcfce7',
            'primary-dark': '#15803d'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          animation: {
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .card-shadow {
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      }
      .progress-ring-circle {
        transition: stroke-dashoffset 0.35s;
        transform: rotate(-90deg);
        transform-origin: 50% 50%;
      }
      .tab-indicator {
        transition: transform 0.3s ease;
      }
      .food-card-hover {
        transition: all 0.3s ease;
      }
      .food-card-hover:hover {
        transform: translateY(-5px);
      }
    }
  </style>
</head>
<body class="bg-gray-50 font-sans text-dark">
  <div class="max-w-md mx-auto min-h-screen bg-white relative">
    <!-- é¡µé¢å®¹å™¨ -->
    <div id="app" class="relative">
      <!-- ä»ªè¡¨æ¿é¡µé¢ -->
      <div id="dashboard-page" class="page active">
        <!-- é¡¶éƒ¨åŒºåŸŸ -->
        <header class="bg-gradient-to-r from-primary to-secondary text-white p-4">
          <div class="flex justify-between items-center">
            <div>
              <h1 class="text-xl font-bold" id="greeting">æ™“è·é¥®é£Ÿç®¡ç†</h1>
              <p class="text-sm opacity-90" id="current-date">2025å¹´7æœˆ21æ—¥ æ˜ŸæœŸä¸€</p>
            </div>
            <div class="w-10 h-10 rounded-full bg-primary-light text-primary flex items-center justify-center text-3xl">ğŸ§˜â€â™€ï¸</div>
          </div>
        </header>

        <!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
        <div class="p-6 flex flex-col items-center">
          <div class="relative w-48 h-48 mb-4">
            <svg class="w-full h-full" viewBox="0 0 100 100">
              <!-- èƒŒæ™¯åœ†ç¯ -->
              <circle class="text-gray-200" stroke-width="8" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50"></circle>
              <!-- è¿›åº¦åœ†ç¯ -->
              <circle id="progress-ring" class="text-primary progress-ring-circle" stroke-width="8" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50" stroke-dasharray="251.2" stroke-dashoffset="188.4"></circle>
            </svg>
            <div class="absolute inset-0 flex flex-col items-center justify-center">
              <span id="calorie-progress" class="text-3xl font-bold text-dark">300</span>
              <span class="text-sm text-gray-500">&nbsp;1200 Cals</span>
            </div>
          </div>
          <div class="w-full max-w-xs">
            <div class="flex justify-between text-sm text-gray-500 mb-1">
              <span>ä»Šæ—¥æ‘„å…¥</span>
              <span id="calorie-percentage">25%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div id="calorie-bar" class="bg-primary h-2 rounded-full" style="width: 25%"></div>
            </div>
          </div>
        </div>

        <!-- å®é‡è¥å…»ç´ å¡ç‰‡ -->
        <div class="px-4 mb-6">
          <h2 class="text-lg font-semibold mb-3">
</h2>
          <div class="grid grid-cols-3 gap-3">
            <!-- ç¢³æ°´åŒ–åˆç‰© -->
            <div class="bg-blue-50 rounded-xl p-3 flex flex-col items-center">
              <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-2 text-2xl">
                ğŸ
              </div>
              <span class="text-xs text-gray-500">ç¢³æ°´åŒ–åˆç‰©</span>
              <span id="carbs-value" class="font-semibold">25g</span>
            </div>
            <!-- è›‹ç™½è´¨ -->
            <div class="bg-purple-50 rounded-xl p-3 flex flex-col items-center">
              <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center mb-2 text-2xl">
                ğŸ¥©
              </div>
              <span class="text-xs text-gray-500">è›‹ç™½è´¨</span>
              <span id="protein-value" class="font-semibold">18g</span>
            </div>
            <!-- è„‚è‚ª -->
            <div class="bg-yellow-50 rounded-xl p-3 flex flex-col items-center">
              <div class="w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center mb-2 text-2xl" style="color: rgb(123, 145, 181);">ğŸ¥‘</div>
              <span class="text-xs text-gray-500">è„‚è‚ª</span>
              <span id="fat-value" class="font-semibold">12g</span>
            </div>
          </div>
        </div>

        <!-- é¤é£Ÿè®°å½• -->
        <div class="px-4 mb-10 py-10">
          <div class="flex justify-between items-center mb-3">
            <h2 class="text-lg font-semibold">ä»Šæ—¥é¤é£Ÿ</h2>
            <button id="add-meal-btn" class="text-primary text-sm flex items-center">
              <i class="fa fa-plus-circle mr-1"></i> æ·»åŠ é¤é£Ÿ
            </button>
          </div>
          
          <!-- é¤é£Ÿæ ‡ç­¾é¡µ -->
          <div class="relative mb-4">
            <div class="flex justify-between">
              <button class="meal-tab flex-1 py-2 text-center text-sm font-medium text-primary border-b-2 border-primary" data-meal="breakfast">æ—©é¤</button>
              <button class="meal-tab flex-1 py-2 text-center text-sm font-medium text-gray-400 border-b-2 border-transparent" data-meal="lunch">åˆé¤</button>
              <button class="meal-tab flex-1 py-2 text-center text-sm font-medium text-gray-400 border-b-2 border-transparent" data-meal="dinner">æ™šé¤</button>
              <button class="meal-tab flex-1 py-2 text-center text-sm font-medium text-gray-400 border-b-2 border-transparent" data-meal="snack">é›¶é£Ÿ</button>
            </div>
            <div class="tab-indicator absolute bottom-0 left-0 h-0.5 bg-primary w-1/4"></div>
          </div>
          
          <!-- é¤é£Ÿå†…å®¹ -->
          <div class="meal-content active" id="breakfast-content">
            <div class="space-y-3" id="breakfast-list">
              <!-- ç¤ºä¾‹é¤é£Ÿé¡¹ -->
              <div class="bg-white rounded-xl p-3 border border-gray-100 card-shadow flex justify-between items-center">
                <div class="flex items-center">
                  <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                    <div class="w-full h-full flex items-center justify-center bg-green-100 text-xl">ğŸ¥</div>
                  </div>
                  <div>
                    <h3 class="font-medium">çŒ•çŒ´æ¡ƒ</h3>
                    <p class="text-xs text-gray-500">1ä¸ª Â· 61å¡è·¯é‡Œ</p>
                  </div>
                </div>
                <button class="text-gray-400 hover:text-red-500">
                  <i class="fa fa-trash"></i>
                </button>
              </div>
              <div class="bg-white rounded-xl p-3 border border-gray-100 card-shadow flex justify-between items-center">
                <div class="flex items-center">
                  <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                    <div class="w-full h-full flex items-center justify-center bg-orange-100 text-xl">ğŸ¥­</div>
                  </div>
                  <div>
                    <h3 class="font-medium">ç™¾é¦™æœ</h3>
                    <p class="text-xs text-gray-500">1ä¸ª Â· 97å¡è·¯é‡Œ</p>
                  </div>
                </div>
                <button class="text-gray-400 hover:text-red-500">
                  <i class="fa fa-trash"></i>
                </button>
              </div>
            </div>
            <!-- ç©ºçŠ¶æ€ -->
            <div class="hidden flex flex-col items-center justify-center py-8 text-gray-400">
              <i class="fa fa-utensils text-4xl mb-2"></i>
              <p class="text-sm">æ—©é¤è¿˜æ²¡æœ‰è®°å½•</p>
              <button class="mt-2 text-primary text-sm">æ·»åŠ é£Ÿç‰©</button>
            </div>
          </div>
          
          <div class="meal-content hidden" id="lunch-content">
            <div class="space-y-3" id="lunch-list">
              <!-- åˆé¤å†…å®¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
            </div>
            <!-- ç©ºçŠ¶æ€ -->
            <div class="flex flex-col items-center justify-center py-8 text-gray-400">
              <i class="fa fa-utensils text-4xl mb-2"></i>
              <p class="text-sm">åˆé¤è¿˜æ²¡æœ‰è®°å½•</p>
              <button class="mt-2 text-primary text-sm add-food-btn" data-meal="lunch">æ·»åŠ é£Ÿç‰©</button>
            </div>
          </div>
          
          <div class="meal-content hidden" id="dinner-content">
            <div class="space-y-3" id="dinner-list">
              <!-- æ™šé¤å†…å®¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
            </div>
            <!-- ç©ºçŠ¶æ€ -->
            <div class="flex flex-col items-center justify-center py-8 text-gray-400">
              <i class="fa fa-utensils text-4xl mb-2"></i>
              <p class="text-sm">æ™šé¤è¿˜æ²¡æœ‰è®°å½•</p>
              <button class="mt-2 text-primary text-sm add-food-btn" data-meal="dinner">æ·»åŠ é£Ÿç‰©</button>
            </div>
          </div>
          
          <div class="meal-content hidden" id="snack-content">
            <div class="space-y-3" id="snack-list">
              <!-- é›¶é£Ÿå†…å®¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
            </div>
            <!-- ç©ºçŠ¶æ€ -->
            <div class="flex flex-col items-center justify-center py-8 text-gray-400">
              <i class="fa fa-utensils text-4xl mb-2"></i>
              <p class="text-sm">é›¶é£Ÿè¿˜æ²¡æœ‰è®°å½•</p>
              <button class="mt-2 text-primary text-sm add-food-btn" data-meal="snack">æ·»åŠ é£Ÿç‰©</button>
            </div>
          </div>
        </div>
      </div>

      <!-- é£Ÿç‰©æœç´¢é¡µé¢ -->
      <div id="search-page" class="page hidden">
        <header class="bg-white shadow-sm p-4 sticky top-0 z-10">
          <div class="relative">
            <input type="text" id="food-search-input" placeholder="æœç´¢é£Ÿç‰©..." class="w-full pl-10 pr-4 py-2 rounded-full bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary">
            <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
        </header>
        
        <!-- åˆ†ç±»ç­›é€‰ -->
        <div class="px-4 py-3 overflow-x-auto">
          <div class="flex space-x-2 min-w-max">
            <button class="category-btn whitespace-nowrap px-4 py-1 rounded-full bg-primary text-white text-sm">å…¨éƒ¨</button>
            <button class="category-btn whitespace-nowrap px-4 py-1 rounded-full bg-gray-100 text-gray-700 text-sm">æ°´æœ</button>
            <button class="category-btn whitespace-nowrap px-4 py-1 rounded-full bg-gray-100 text-gray-700 text-sm">è”¬èœ</button>
            <button class="category-btn whitespace-nowrap px-4 py-1 rounded-full bg-gray-100 text-gray-700 text-sm">ä¸»é£Ÿ</button>
            <button class="category-btn whitespace-nowrap px-4 py-1 rounded-full bg-gray-100 text-gray-700 text-sm">è›‹ç™½è´¨</button>
            <button class="category-btn whitespace-nowrap px-4 py-1 rounded-full bg-gray-100 text-gray-700 text-sm">é›¶é£Ÿ</button>
          </div>
        </div>
        
        <!-- æœç´¢ç»“æœ -->
        <div class="p-4" id="search-results">
          <div class="pb-16 grid grid-cols-2 gap-3">
            <!-- é£Ÿç‰©å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
          </div>
          
          <!-- ç©ºçŠ¶æ€ -->
          <div id="search-empty-state" class="hidden flex flex-col items-center justify-center py-12 text-gray-400">
            <i class="fa fa-search text-4xl mb-2"></i>
            <p class="text-sm">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„é£Ÿç‰©</p>
            <p class="text-xs mt-1">è¯·å°è¯•å…¶ä»–å…³é”®è¯</p>
          </div>
        </div>
      </div>

      <!-- é£Ÿç‰©è¯¦æƒ…é¡µé¢ -->
      <div id="food-detail-page" class="page hidden">
        <header class="bg-white shadow-sm p-4 sticky top-0 z-10 flex justify-between items-center">
          <button id="back-to-search" class="text-gray-500">
            <i class="fa fa-arrow-left"></i>
          </button>
          <h2 class="font-medium">é£Ÿç‰©è¯¦æƒ…</h2>
          <div class="w-6"></div> <!-- å ä½ï¼Œä¿æŒæ ‡é¢˜å±…ä¸­ -->
        </header>
        
        <div class="p-4">
          <!-- é£Ÿç‰©å›¾ç‰‡æˆ–Emoji -->
          <div class="w-full h-48 rounded-xl overflow-hidden mb-4 flex items-center justify-center bg-gray-100">
            <div id="food-detail-emoji" class="text-8xl">ğŸŸ</div>
          </div>
          
          <!-- é£Ÿç‰©åç§°å’Œçƒ­é‡ -->
          <div class="flex justify-between items-center mb-4">
            <h1 id="food-detail-name" class="text-xl font-bold">çŒ•çŒ´æ¡ƒ</h1>
            <span id="food-detail-calorie" class="text-primary font-semibold">61 å¡è·¯é‡Œ</span>
          </div>
          
          <!-- è¥å…»æˆåˆ† -->
          <div class="bg-gray-50 rounded-xl p-4 mb-4">
            <h3 class="text-sm font-medium text-gray-500 mb-3">è¥å…»æˆåˆ† (æ¯ä»½)</h3>
            <div class="space-y-2">
              <div class="flex justify-between">
                <span class="text-sm">ç¢³æ°´åŒ–åˆç‰©</span>
                <span id="food-detail-carbs" class="text-sm font-medium">15g</span>
              </div>
              <div class="flex justify-between">
                <span class="text-sm">è›‹ç™½è´¨</span>
                <span id="food-detail-protein" class="text-sm font-medium">1.1g</span>
              </div>
              <div class="flex justify-between">
                <span class="text-sm">è„‚è‚ª</span>
                <span id="food-detail-fat" class="text-sm font-medium">0.5g</span>
              </div>
              <div class="flex justify-between">
                <span class="text-sm">è†³é£Ÿçº¤ç»´</span>
                <span id="food-detail-fiber" class="text-sm font-medium">2.6g</span>
              </div>
            </div>
          </div>
          
          <!-- ä»½é‡é€‰æ‹© -->
          <div class="mb-6">
            <h3 class="text-sm font-medium text-gray-500 mb-3">é€‰æ‹©ä»½é‡</h3>
            <div class="grid grid-cols-3 gap-2">
              <button class="portion-btn px-3 py-2 border border-gray-200 rounded-lg text-center">
                <span class="block text-sm">1/2ä¸ª</span>
                <span class="block text-xs text-gray-500">30å¡è·¯é‡Œ</span>
              </button>
              <button class="portion-btn px-3 py-2 border border-primary bg-primary-light rounded-lg text-center">
                <span class="block text-sm">1ä¸ª</span>
                <span class="block text-xs text-gray-500">61å¡è·¯é‡Œ</span>
              </button>
              <button class="portion-btn px-3 py-2 border border-gray-200 rounded-lg text-center">
                <span class="block text-sm">2ä¸ª</span>
                <span class="block text-xs text-gray-500">122å¡è·¯é‡Œ</span>
              </button>
            </div>
          </div>
          
          <!-- æ·»åŠ åˆ°é¤é£ŸæŒ‰é’® -->
          <button id="add-to-meal-btn" class="w-full py-3 bg-primary text-white rounded-xl font-medium flex items-center justify-center">
            <i class="fa fa-plus-circle mr-2"></i> æ·»åŠ åˆ°æ—©é¤
          </button>
        </div>
      </div>

      <!-- è¿›åº¦è¿½è¸ªé¡µé¢ -->
      <div id="progress-page" class="page hidden">
        <header class="bg-gradient-to-r from-primary to-secondary text-white p-4">
          <h1 class="text-xl font-bold">è¿›åº¦è¿½è¸ª</h1>
        </header>
        
        <!-- æ€»ä½“è¿›åº¦ -->
        <div class="p-6 pb-24">
          <div class="bg-white rounded-xl p-4 card-shadow mb-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold">æ€»ä½“è¿›åº¦</h2>
              <span class="text-sm text-gray-500">æœ¬å‘¨</span>
            </div>
            <div class="flex items-center justify-center mb-4">
              <div class="relative w-32 h-32">
                <svg class="w-full h-full" viewBox="0 0 100 100">
                  <!-- èƒŒæ™¯åœ†ç¯ -->
                  <circle class="text-gray-200" stroke-width="8" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50"></circle>
                  <!-- è¿›åº¦åœ†ç¯ -->
                  <circle class="text-primary progress-ring-circle" stroke-width="8" stroke="currentColor" fill="transparent" r="40" cx="50" cy="50" stroke-dasharray="251.2" stroke-dashoffset="100.5"></circle>
                </svg>
                <div class="absolute inset-0 flex flex-col items-center justify-center">
                  <span class="text-2xl font-bold text-dark">60%</span>
                  <span class="text-xs text-gray-500">å®Œæˆç‡</span>
                </div>
              </div>
            </div>
            <div class="flex justify-between text-sm">
              <div class="text-center">
                <p class="text-gray-500">ç›®æ ‡</p>
                <p class="font-medium">1200å¡è·¯é‡Œ/å¤©</p>
              </div>
              <div class="text-center">
                <p class="text-gray-500">å¹³å‡æ‘„å…¥</p>
                <p class="font-medium">950å¡è·¯é‡Œ/å¤©</p>
              </div>
              <div class="text-center">
                <p class="text-gray-500">è¿ç»­æ‰“å¡</p>
                <p class="font-medium">5å¤©</p>
              </div>
            </div>
          </div>
          
          <!-- æ¯æ—¥æ‘„å…¥è¶‹åŠ¿ -->
          <div class="bg-white rounded-xl p-4 card-shadow mb-6">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold">æ¯æ—¥æ‘„å…¥è¶‹åŠ¿</h2>
              <div class="flex space-x-1">
                <button class="text-xs px-2 py-1 bg-primary text-white rounded">å‘¨</button>
                <button class="text-xs px-2 py-1 bg-gray-100 text-gray-500 rounded">æœˆ</button>
              </div>
            </div>
            <div class="h-40">
              <canvas id="calorie-chart"></canvas>
            </div>
          </div>
          
          <!-- è¥å…»åˆ†å¸ƒ -->
          <div class="bg-white rounded-xl p-4 card-shadow">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold">è¥å…»åˆ†å¸ƒ</h2>
              <span class="text-sm text-gray-500">æœ¬å‘¨å¹³å‡</span>
            </div>
            <div class="flex justify-center mb-4">
              <div class="w-32 h-32">
                <canvas id="nutrition-chart"></canvas>
              </div>
            </div>
            <div class="grid grid-cols-3 gap-2 text-center">
              <div>
                <div class="w-3 h-3 rounded-full bg-blue-500 mx-auto mb-1"></div>
                <p class="text-xs">ç¢³æ°´åŒ–åˆç‰©</p>
                <p class="text-sm font-medium">50%</p>
              </div>
              <div>
                <div class="w-3 h-3 rounded-full bg-purple-500 mx-auto mb-1"></div>
                <p class="text-xs">è›‹ç™½è´¨</p>
                <p class="text-sm font-medium">30%</p>
              </div>
              <div>
                <div class="w-3 h-3 rounded-full bg-yellow-500 mx-auto mb-1"></div>
                <p class="text-xs">è„‚è‚ª</p>
                <p class="text-sm font-medium">20%</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ä¸ªäººèµ„æ–™é¡µé¢ -->
      <div id="profile-page" class="page hidden">
        <header class="bg-gradient-to-r from-primary to-secondary text-white p-4">
          <h1 class="text-xl font-bold">æˆ‘çš„</h1>
        </header>
        
        <div class="p-6 pb-24">
          <!-- ç”¨æˆ·ä¿¡æ¯ -->
          <div class="flex flex-col items-center mb-6">
            <div class="w-24 h-24 rounded-full bg-primary-light text-primary flex items-center justify-center text-5xl border-4 border-white shadow-md">
              ğŸ‘¦
            </div>
            <h2 class="text-xl font-bold">ç”¨æˆ·</h2>
            <p class="text-sm text-gray-500">å·²ä½¿ç”¨ 14 å¤©</p>
          </div>
          
          <!-- ç›®æ ‡è®¾ç½® -->
          <div class="bg-white rounded-xl p-4 card-shadow mb-6">
            <h2 class="text-lg font-semibold mb-4">æ¯æ—¥çƒ­é‡ç›®æ ‡</h2>
            <div class="flex items-center justify-between mb-2">
              <span class="text-sm">1200 å¡è·¯é‡Œ</span>
              <button class="text-primary text-sm">ç¼–è¾‘</button>
            </div>
            <input type="range" min="1000" max="3000" step="100" value="1200" class="w-full accent-primary">
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>1000</span>
              <span>2000</span>
              <span>3000</span>
            </div>
          </div>
          
          <!-- æˆå°± -->
          <div class="bg-white rounded-xl p-4 card-shadow mb-6">
            <h2 class="text-lg font-semibold mb-4">æˆ‘çš„æˆå°±</h2>
            <div class="grid grid-cols-3 gap-3">
              <div class="flex flex-col items-center">
                <div class="w-16 h-16 rounded-full bg-primary-light flex items-center justify-center mb-2">
                  <i class="fa fa-star text-primary text-xl"></i>
                </div>
                <p class="text-xs text-center">è¿ç»­7å¤©æ‰“å¡</p>
              </div>
              <div class="flex flex-col items-center">
                <div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-2">
                  <i class="fa fa-trophy text-gray-400 text-xl"></i>
                </div>
                <p class="text-xs text-center text-gray-400">é¦–æ¬¡è¾¾æˆç›®æ ‡</p>
              </div>
              <div class="flex flex-col items-center">
                <div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-2">
                  <i class="fa fa-leaf text-gray-400 text-xl"></i>
                </div>
                <p class="text-xs text-center text-gray-400">å¥åº·é¥®é£Ÿ</p>
              </div>
            </div>
          </div>
          
          <!-- è®¾ç½®é€‰é¡¹ -->
          <div class="bg-white rounded-xl p-4 card-shadow">
            <h2 class="text-lg font-semibold mb-4">è®¾ç½®</h2>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <i class="fa fa-bell text-gray-500 mr-3"></i>
                  <span>é€šçŸ¥</span>
                </div>
                <label class="switch">
                  <input type="checkbox" checked="">
                  <span class="slider round"></span>
                </label>
              </div>
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <i class="fa fa-moon-o text-gray-500 mr-3"></i>
                  <span>æ·±è‰²æ¨¡å¼</span>
                </div>
                <label class="switch">
                  <input type="checkbox">
                  <span class="slider round"></span>
                </label>
              </div>
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <i class="fa fa-history text-gray-500 mr-3"></i>
                  <span>å†å²è®°å½•</span>
                </div>
                <i class="fa fa-chevron-right text-gray-400"></i>
              </div>
              <div class="flex justify-between items-center">
                <div class="flex items-center">
                  <i class="fa fa-question-circle text-gray-500 mr-3"></i>
                  <span>å¸®åŠ©ä¸æ”¯æŒ</span>
                </div>
                <i class="fa fa-chevron-right text-gray-400"></i>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- åº•éƒ¨å¯¼èˆªæ  -->
      <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t border-gray-200 flex justify-around items-center py-2 z-20">
        <button class="nav-btn flex flex-col items-center justify-center p-2 w-1/4 active" data-page="dashboard-page">
          <i class="fa fa-home text-lg"></i>
          <span class="text-xs mt-1">é¦–é¡µ</span>
        </button>
        <button class="nav-btn flex flex-col items-center justify-center p-2 w-1/4" data-page="search-page">
          <i class="fa fa-search text-lg"></i>
          <span class="text-xs mt-1">æœç´¢</span>
        </button>
        <button class="nav-btn flex flex-col items-center justify-center p-2 w-1/4" data-page="progress-page">
          <i class="fa fa-line-chart text-lg"></i>
          <span class="text-xs mt-1">è¿›åº¦</span>
        </button>
        <button class="nav-btn flex flex-col items-center justify-center p-2 w-1/4" data-page="profile-page">
          <i class="fa fa-user text-lg"></i>
          <span class="text-xs mt-1">æˆ‘çš„</span>
        </button>
      </nav>
    </div>
  </div>

  <style>
    /* å¼€å…³æ ·å¼ */
    .switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
    }
    
    input:checked + .slider {
      background-color: #22c55e;
    }
    
    input:checked + .slider:before {
      transform: translateX(20px);
    }
    
    .slider.round {
      border-radius: 20px;
    }
    
    .slider.round:before {
      border-radius: 50%;
    }
    
    /* é¡µé¢åˆ‡æ¢åŠ¨ç”» */
    .page {
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    .page.active {
      display: block;
    }
    
    .page.hidden {
      display: none;
      opacity: 0;
      transform: translateX(20px);
    }
    
    /* åº•éƒ¨å¯¼èˆªæ æ¿€æ´»çŠ¶æ€ */
    .nav-btn.active {
      color: #22c55e;
    }
    
    /* é¤é£Ÿæ ‡ç­¾é¡µæ¿€æ´»çŠ¶æ€ */
    .meal-tab.active {
      color: #22c55e;
      border-bottom-color: #22c55e;
    }
  </style>

  <script>
    // é£Ÿç‰©æ•°æ®åº“
    const foodDatabase = [
      {
        id: 1,
        name: 'çŒ•çŒ´æ¡ƒ',
        category: 'æ°´æœ',
        calories: 61,
        carbs: 15,
        protein: 1.1,
        fat: 0.5,
        fiber: 2.6,
        image: 'emoji:kiwi'
      },
      {
        id: 2,
        name: 'ç™¾é¦™æœ',
        category: 'æ°´æœ',
        calories: 97,
        carbs: 23,
        protein: 2.2,
        fat: 0.7,
        fiber: 10.4,
        image: 'emoji:passionfruit'
      },
      {
        id: 3,
        name: 'è¥¿ç“œ',
        category: 'æ°´æœ',
        calories: 30,
        carbs: 7.6,
        protein: 0.6,
        fat: 0.2,
        fiber: 0.4,
        image: 'emoji:watermelon'
      },
      {
        id: 4,
        name: 'è¥¿å…°èŠ±',
        category: 'è”¬èœ',
        calories: 34,
        carbs: 7.1,
        protein: 2.8,
        fat: 0.4,
        fiber: 2.6,
        image: 'emoji:broccoli'
      },
      {
        id: 5,
        name: 'å°ç™½èœ',
        category: 'è”¬èœ',
        calories: 13,
        carbs: 2.4,
        protein: 1.5,
        fat: 0.2,
        fiber: 1.1,
        image: 'emoji:bokchoy'
      },
      {
        id: 6,
        name: 'å…¨éº¦é¢åŒ…',
        category: 'ä¸»é£Ÿ',
        calories: 69,
        carbs: 12.8,
        protein: 3.6,
        fat: 1,
        fiber: 2.6,
        image: 'emoji:bread'
      },
      {
        id: 7,
        name: 'ç±³é¥­',
        category: 'ä¸»é£Ÿ',
        calories: 130,
        carbs: 28.2,
        protein: 2.7,
        fat: 0.3,
        fiber: 0.4,
        image: 'emoji:rice'
      },
      {
        id: 8,
        name: 'é¸¡èƒ¸è‚‰',
        category: 'è›‹ç™½è´¨',
        calories: 165,
        carbs: 0,
        protein: 31,
        fat: 3.6,
        fiber: 0,
        image: 'emoji:chicken'
      },
      {
        id: 9,
        name: 'ä¸‰æ–‡é±¼',
        category: 'è›‹ç™½è´¨',
        calories: 208,
        carbs: 0,
        protein: 20.4,
        fat: 13.4,
        fiber: 0,
        image: 'emoji:salmon'
      },
      {
        id: 10,
        name: 'é¸¡è›‹',
        category: 'è›‹ç™½è´¨',
        calories: 155,
        carbs: 1.1,
        protein: 13,
        fat: 10,
        fiber: 0,
        image: 'emoji:egg'
      }
    ];

    // ç”¨æˆ·æ•°æ®
    let userData = {
      currentCalories: 300,
      targetCalories: 1200,
      macros: {
        carbs: 25,
        protein: 18,
        fat: 12
      },
      meals: {
        breakfast: [
          {
            id: 1,
            name: 'çŒ•çŒ´æ¡ƒ',
            calories: 61,
            quantity: 1,
            image: 'emoji:kiwi'
          },
          {
            id: 2,
            name: 'ç™¾é¦™æœ',
            calories: 97,
            quantity: 1,
            image: 'emoji:passionfruit'
          }
        ],
        lunch: [],
        dinner: [],
        snack: []
      },
      selectedMealType: 'breakfast',
      selectedFood: null
    };

    // DOM å…ƒç´ 
    const elements = {
      pages: document.querySelectorAll('.page'),
      navBtns: document.querySelectorAll('.nav-btn'),
      mealTabs: document.querySelectorAll('.meal-tab'),
      mealContents: document.querySelectorAll('.meal-content'),
      tabIndicator: document.querySelector('.tab-indicator'),
      addMealBtn: document.getElementById('add-meal-btn'),
      addFoodBtns: document.querySelectorAll('.add-food-btn'),
      foodSearchInput: document.getElementById('food-search-input'),
      searchResults: document.getElementById('search-results'),
      searchEmptyState: document.getElementById('search-empty-state'),
      backToSearch: document.getElementById('back-to-search'),
      foodDetailPage: document.getElementById('food-detail-page'),
      foodDetailName: document.getElementById('food-detail-name'),
      foodDetailCalorie: document.getElementById('food-detail-calorie'),
      foodDetailCarbs: document.getElementById('food-detail-carbs'),
      foodDetailProtein: document.getElementById('food-detail-protein'),
      foodDetailFat: document.getElementById('food-detail-fat'),
      foodDetailFiber: document.getElementById('food-detail-fiber'),
      portionBtns: document.querySelectorAll('.portion-btn'),
      addToMealBtn: document.getElementById('add-to-meal-btn'),
      calorieProgress: document.getElementById('calorie-progress'),
      caloriePercentage: document.getElementById('calorie-percentage'),
      calorieBar: document.getElementById('calorie-bar'),
      carbsValue: document.getElementById('carbs-value'),
      proteinValue: document.getElementById('protein-value'),
      fatValue: document.getElementById('fat-value'),
      greeting: document.getElementById('greeting'),
      currentDate: document.getElementById('current-date')
    };

    // åˆå§‹åŒ–
    function init() {
      // è®¾ç½®å½“å‰æ—¥æœŸå’Œé—®å€™è¯­
      setDateAndGreeting();
      
      // åˆå§‹åŒ–è¿›åº¦ç¯
      updateProgressRing();
      
      // åˆå§‹åŒ–åº•éƒ¨å¯¼èˆª
      initNavigation();
      
      // åˆå§‹åŒ–é¤é£Ÿæ ‡ç­¾é¡µ
      initMealTabs();
      
      // åˆå§‹åŒ–æœç´¢åŠŸèƒ½
      initSearch();
      
      // åˆå§‹åŒ–é£Ÿç‰©è¯¦æƒ…é¡µ
      initFoodDetail();
      
      // åˆå§‹åŒ–å›¾è¡¨
      initCharts();
      
      // ç»‘å®šäº‹ä»¶
      bindEvents();
    }

    // è®¾ç½®å½“å‰æ—¥æœŸå’Œé—®å€™è¯­
    function setDateAndGreeting() {
      const now = new Date();
      const hours = now.getHours();
      const options = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
      const dateString = now.toLocaleDateString('zh-CN', options);
      
      let greeting = '';
      if (hours < 12) {
        greeting = 'æ—©ä¸Šå¥½';
      } else if (hours < 18) {
        greeting = 'ä¸‹åˆå¥½';
      } else {
        greeting = 'æ™šä¸Šå¥½';
      }
      
      elements.greeting.textContent = `${greeting}ï¼Œç”¨æˆ·`;
      elements.currentDate.textContent = dateString;
    }

    // æ›´æ–°è¿›åº¦ç¯
    function updateProgressRing() {
      const percentage = (userData.currentCalories / userData.targetCalories) * 100;
      const clampedPercentage = Math.min(100, percentage);
      
      // æ›´æ–°æ–‡æœ¬
      elements.calorieProgress.textContent = userData.currentCalories;
      elements.caloriePercentage.textContent = `${Math.round(clampedPercentage)}%`;
      
      // æ›´æ–°è¿›åº¦æ¡
      elements.calorieBar.style.width = `${clampedPercentage}%`;
      
      // æ›´æ–°å®é‡è¥å…»ç´ 
      elements.carbsValue.textContent = `${userData.macros.carbs}g`;
      elements.proteinValue.textContent = `${userData.macros.protein}g`;
      elements.fatValue.textContent = `${userData.macros.fat}g`;
    }

    // åˆå§‹åŒ–åº•éƒ¨å¯¼èˆª
    function initNavigation() {
      elements.navBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const targetPage = btn.getAttribute('data-page');
          
          // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
          elements.navBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          // åˆ‡æ¢é¡µé¢
          elements.pages.forEach(page => {
            if (page.id === targetPage) {
              page.classList.remove('hidden');
              page.classList.add('active');
            } else {
              page.classList.add('hidden');
              page.classList.remove('active');
            }
          });
        });
      });
    }

    // åˆå§‹åŒ–é¤é£Ÿæ ‡ç­¾é¡µ
    function initMealTabs() {
      elements.mealTabs.forEach((tab, index) => {
        tab.addEventListener('click', () => {
          const mealType = tab.getAttribute('data-meal');
          
          // æ›´æ–°æ ‡ç­¾é¡µçŠ¶æ€
          elements.mealTabs.forEach(t => {
            t.classList.remove('active', 'text-primary', 'border-primary');
            t.classList.add('text-gray-400', 'border-transparent');
          });
          tab.classList.add('active', 'text-primary', 'border-primary');
          tab.classList.remove('text-gray-400', 'border-transparent');
          
          // ç§»åŠ¨æŒ‡ç¤ºå™¨
          elements.tabIndicator.style.transform = `translateX(${index * 100}%)`;
          
          // æ˜¾ç¤ºå¯¹åº”å†…å®¹
          elements.mealContents.forEach(content => {
            content.classList.add('hidden');
          });
          document.getElementById(`${mealType}-content`).classList.remove('hidden');
        });
      });
    }

    // åˆå§‹åŒ–æœç´¢åŠŸèƒ½
    function initSearch() {
      // æ˜¾ç¤ºæ‰€æœ‰é£Ÿç‰©
      renderFoodCards(foodDatabase);
      
      // æœç´¢è¾“å…¥äº‹ä»¶
      elements.foodSearchInput.addEventListener('input', () => {
        const searchTerm = elements.foodSearchInput.value.toLowerCase().trim();
        
        if (searchTerm === '') {
          renderFoodCards(foodDatabase);
          return;
        }
        
        // æœç´¢åŒ¹é…çš„é£Ÿç‰©
        const filteredFoods = foodDatabase.filter(food => 
          food.name.toLowerCase().includes(searchTerm) ||
          food.category.toLowerCase().includes(searchTerm)
        );
        
        renderFoodCards(filteredFoods);
      });
    }

    // æ¸²æŸ“é£Ÿç‰©å¡ç‰‡
    function renderFoodCards(foods) {
      const container = elements.searchResults.querySelector('.grid');
      container.innerHTML = '';
      
      if (foods.length === 0) {
        container.parentElement.classList.add('hidden');
        elements.searchEmptyState.classList.remove('hidden');
        return;
      }
      
      container.parentElement.classList.remove('hidden');
      elements.searchEmptyState.classList.add('hidden');
      
      foods.forEach(food => {
        const card = document.createElement('div');
        card.className = 'food-card bg-white rounded-xl overflow-hidden border border-gray-100 card-shadow food-card-hover';
        
        // å¤„ç†å›¾ç‰‡æˆ–emoji
        let imageContent = '';
        if (food.image && food.image.startsWith('emoji:')) {
          const emojiType = food.image.split(':')[1];
          let emoji = '';
          let bgColor = 'bg-gray-100';
          
          switch(emojiType) {
            case 'kiwi': emoji = 'ğŸ¥'; bgColor = 'bg-green-100'; break;
            case 'passionfruit': emoji = 'ğŸ¥­'; bgColor = 'bg-orange-100'; break; // ä½¿ç”¨èŠ’æœemojiä»£æ›¿ç™¾é¦™æœ
            case 'watermelon': emoji = 'ğŸ‰'; bgColor = 'bg-red-100'; break;
            case 'broccoli': emoji = 'ğŸ¥¦'; bgColor = 'bg-green-100'; break;
            case 'bokchoy': emoji = 'ğŸ¥¬'; bgColor = 'bg-green-100'; break;
            case 'bread': emoji = 'ğŸ'; bgColor = 'bg-yellow-100'; break;
            case 'rice': emoji = 'ğŸš'; bgColor = 'bg-yellow-100'; break;
            case 'chicken': emoji = 'ğŸ—'; bgColor = 'bg-yellow-100'; break;
            case 'salmon': emoji = 'ğŸŸ'; bgColor = 'bg-pink-100'; break;
            case 'egg': emoji = 'ğŸ¥š'; bgColor = 'bg-yellow-100'; break;
            default: emoji = 'ğŸ'; bgColor = 'bg-red-100'; // é»˜è®¤æ°´æœemoji
          }
          
          imageContent = `<div class="h-full ${bgColor} flex items-center justify-center text-4xl">${emoji}</div>`;
        } else {
          imageContent = `<img src="${food.image}" alt="${food.name}" class="w-full h-full object-cover">`;
        }
        
        card.innerHTML = `
          <div class="h-24 overflow-hidden">
            ${imageContent}
          </div>
          <div class="p-3">
            <h3 class="font-medium text-sm">${food.name}</h3>
            <div class="flex justify-between items-center mt-1">
              <span class="text-xs text-gray-500">${food.category}</span>
              <span class="text-xs font-medium">${food.calories} å¡</span>
            </div>
          </div>
        `;
        
        card.addEventListener('click', () => showFoodDetail(food));
        container.appendChild(card);
      });
    }

    // åˆå§‹åŒ–é£Ÿç‰©è¯¦æƒ…é¡µ
    function initFoodDetail() {
      // è¿”å›æŒ‰é’®
      elements.backToSearch.addEventListener('click', () => {
        elements.foodDetailPage.classList.add('hidden');
        document.getElementById('search-page').classList.remove('hidden');
      });
      
      // ä»½é‡é€‰æ‹©
      elements.portionBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          elements.portionBtns.forEach(b => {
            b.classList.remove('border-primary', 'bg-primary-light');
            b.classList.add('border-gray-200');
          });
          btn.classList.add('border-primary', 'bg-primary-light');
          btn.classList.remove('border-gray-200');
        });
      });
      
      // æ·»åŠ åˆ°é¤é£ŸæŒ‰é’®
      elements.addToMealBtn.addEventListener('click', () => {
        if (!userData.selectedFood) return;
        
        // è·å–é€‰ä¸­çš„ä»½é‡
        const activePortion = document.querySelector('.portion-btn.border-primary');
        const portionText = activePortion.querySelector('.text-sm').textContent;
        const caloriesText = activePortion.querySelector('.text-xs').textContent;
        const calories = parseInt(caloriesText);
        
        // è®¡ç®—ä»½é‡å€æ•°
        let multiplier = 1;
        if (portionText.includes('1/2')) multiplier = 0.5;
        else if (portionText.includes('2')) multiplier = 2;
        
        // åˆ›å»ºé¤é£Ÿé¡¹
        const mealItem = {
          id: Date.now(), // ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
          name: userData.selectedFood.name,
          calories: Math.round(userData.selectedFood.calories * multiplier),
          quantity: multiplier,
          image: userData.selectedFood.image,
          macros: {
            carbs: Math.round(userData.selectedFood.carbs * multiplier),
            protein: Math.round(userData.selectedFood.protein * multiplier),
            fat: Math.round(userData.selectedFood.fat * multiplier)
          }
        };
        
        // æ·»åŠ åˆ°ç”¨æˆ·æ•°æ®
        userData.meals[userData.selectedMealType].push(mealItem);
        
        // æ›´æ–°æ€»çƒ­é‡å’Œå®é‡è¥å…»ç´ 
        userData.currentCalories += mealItem.calories;
        userData.macros.carbs += mealItem.macros.carbs;
        userData.macros.protein += mealItem.macros.protein;
        userData.macros.fat += mealItem.macros.fat;
        
        // æ›´æ–°UI
        updateProgressRing();
        renderMealItems();
        
        // è¿”å›ä»ªè¡¨æ¿
        navigateToPage('dashboard-page');
      });
    }

    // æ˜¾ç¤ºé£Ÿç‰©è¯¦æƒ…
    function showFoodDetail(food) {
      userData.selectedFood = food;
      
      // æ›´æ–°è¯¦æƒ…é¡µå†…å®¹
      elements.foodDetailName.textContent = food.name;
      elements.foodDetailCalorie.textContent = `${food.calories} å¡è·¯é‡Œ`;
      elements.foodDetailCarbs.textContent = `${food.carbs}g`;
      elements.foodDetailProtein.textContent = `${food.protein}g`;
      elements.foodDetailFat.textContent = `${food.fat}g`;
      elements.foodDetailFiber.textContent = `${food.fiber}g`;
      
      // æ ¹æ®é£Ÿç‰©ç±»å‹æ˜¾ç¤ºå¯¹åº”çš„emoji
      const emojiElement = document.getElementById('food-detail-emoji');
      if (food.image && food.image.startsWith('emoji:')) {
        const emojiType = food.image.split(':')[1];
        switch(emojiType) {
          case 'kiwi': emojiElement.textContent = 'ğŸ¥'; break;
          case 'passionfruit': emojiElement.textContent = 'ğŸ¥­'; break; // ä½¿ç”¨èŠ’æœemojiä»£æ›¿ç™¾é¦™æœ
          case 'watermelon': emojiElement.textContent = 'ğŸ‰'; break;
          case 'broccoli': emojiElement.textContent = 'ğŸ¥¦'; break;
          case 'bokchoy': emojiElement.textContent = 'ğŸ¥¬'; break;
          case 'bread': emojiElement.textContent = 'ğŸ'; break;
          case 'rice': emojiElement.textContent = 'ğŸš'; break;
          case 'chicken': emojiElement.textContent = 'ğŸ—'; break;
          case 'salmon': emojiElement.textContent = 'ğŸŸ'; break;
          case 'egg': emojiElement.textContent = 'ğŸ¥š'; break;
          default: emojiElement.textContent = 'ğŸ'; // é»˜è®¤æ°´æœemoji
        }
      } else {
        emojiElement.textContent = 'ğŸ'; // é»˜è®¤æ°´æœemoji
      }
      
      // æ›´æ–°ä»½é‡æŒ‰é’®
      elements.portionBtns[0].querySelector('.text-xs').textContent = `${Math.round(food.calories * 0.5)}å¡è·¯é‡Œ`;
      elements.portionBtns[1].querySelector('.text-xs').textContent = `${food.calories}å¡è·¯é‡Œ`;
      elements.portionBtns[2].querySelector('.text-xs').textContent = `${food.calories * 2}å¡è·¯é‡Œ`;
      
      // é‡ç½®ä»½é‡é€‰æ‹©
      elements.portionBtns.forEach(btn => {
        btn.classList.remove('border-primary', 'bg-primary-light');
        btn.classList.add('border-gray-200');
      });
      elements.portionBtns[1].classList.add('border-primary', 'bg-primary-light');
      elements.portionBtns[1].classList.remove('border-gray-200');
      
      // æ›´æ–°æ·»åŠ æŒ‰é’®æ–‡æœ¬
      const mealTypeText = {
        'breakfast': 'æ—©é¤',
        'lunch': 'åˆé¤',
        'dinner': 'æ™šé¤',
        'snack': 'é›¶é£Ÿ'
      };
      elements.addToMealBtn.innerHTML = `<i class="fa fa-plus-circle mr-2"></i> æ·»åŠ åˆ°${mealTypeText[userData.selectedMealType]}`;
      
      // åˆ‡æ¢åˆ°è¯¦æƒ…é¡µ
      document.getElementById('search-page').classList.add('hidden');
      elements.foodDetailPage.classList.remove('hidden');
    }

    // æ¸²æŸ“é¤é£Ÿé¡¹
    function renderMealItems() {
      for (const mealType in userData.meals) {
        const container = document.getElementById(`${mealType}-list`);
        const emptyState = container.nextElementSibling;
        
        if (userData.meals[mealType].length === 0) {
          container.classList.add('hidden');
          emptyState.classList.remove('hidden');
          continue;
        }
        
        container.classList.remove('hidden');
        emptyState.classList.add('hidden');
        container.innerHTML = '';
        
        userData.meals[mealType].forEach(item => {
          const mealItem = document.createElement('div');
          mealItem.className = 'bg-white rounded-xl p-3 border border-gray-100 card-shadow flex justify-between items-center';
          
          // å¤„ç†å›¾ç‰‡æˆ–emoji
          let imageContent = '';
          if (item.image && item.image.startsWith('emoji:')) {
            const emojiType = item.image.split(':')[1];
            let emoji = '';
            let bgColor = 'bg-gray-100';
            
            switch(emojiType) {
              case 'kiwi': emoji = 'ğŸ¥'; bgColor = 'bg-green-100'; break;
              case 'passionfruit': emoji = 'ğŸ¥­'; bgColor = 'bg-orange-100'; break; // ä½¿ç”¨èŠ’æœemojiä»£æ›¿ç™¾é¦™æœ
              case 'watermelon': emoji = 'ğŸ‰'; bgColor = 'bg-red-100'; break;
              case 'broccoli': emoji = 'ğŸ¥¦'; bgColor = 'bg-green-100'; break;
              case 'bokchoy': emoji = 'ğŸ¥¬'; bgColor = 'bg-green-100'; break;
              case 'bread': emoji = 'ğŸ'; bgColor = 'bg-yellow-100'; break;
              case 'rice': emoji = 'ğŸš'; bgColor = 'bg-yellow-100'; break;
              case 'chicken': emoji = 'ğŸ—'; bgColor = 'bg-yellow-100'; break;
              case 'salmon': emoji = 'ğŸŸ'; bgColor = 'bg-pink-100'; break;
              case 'egg': emoji = 'ğŸ¥š'; bgColor = 'bg-yellow-100'; break;
              default: emoji = 'ğŸ'; bgColor = 'bg-red-100'; // é»˜è®¤æ°´æœemoji
            }
            
            imageContent = `<div class="w-full h-full flex items-center justify-center ${bgColor} text-xl">${emoji}</div>`;
          } else {
            imageContent = `<img src="${item.image}" alt="${item.name}" class="w-full h-full object-cover">`;
          }
          
          mealItem.innerHTML = `
            <div class="flex items-center">
              <div class="w-10 h-10 rounded-lg overflow-hidden mr-3">
                ${imageContent}
              </div>
              <div>
                <h3 class="font-medium">${item.name}</h3>
                <p class="text-xs text-gray-500">${item.quantity}ä»½ Â· ${item.calories}å¡è·¯é‡Œ</p>
              </div>
            </div>
            <button class="text-gray-400 hover:text-red-500 delete-meal-item" data-id="${item.id}">
              <i class="fa fa-trash"></i>
            </button>
          `;
          
          container.appendChild(mealItem);
        });
        
        // æ·»åŠ åˆ é™¤äº‹ä»¶
        document.querySelectorAll('.delete-meal-item').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const itemId = parseInt(e.currentTarget.getAttribute('data-id'));
            deleteMealItem(mealType, itemId);
          });
        });
      }
    }

    // åˆ é™¤é¤é£Ÿé¡¹
    function deleteMealItem(mealType, itemId) {
      const mealItems = userData.meals[mealType];
      const index = mealItems.findIndex(item => item.id === itemId);
      
      if (index !== -1) {
        const deletedItem = mealItems.splice(index, 1)[0];
        
        // æ›´æ–°æ€»çƒ­é‡å’Œå®é‡è¥å…»ç´ 
        userData.currentCalories -= deletedItem.calories;
        userData.macros.carbs -= deletedItem.macros?.carbs || 0;
        userData.macros.protein -= deletedItem.macros?.protein || 0;
        userData.macros.fat -= deletedItem.macros?.fat || 0;
        
        // æ›´æ–°UI
        updateProgressRing();
        renderMealItems();
      }
    }

    // åˆå§‹åŒ–å›¾è¡¨
    function initCharts() {
      // æ¯æ—¥æ‘„å…¥è¶‹åŠ¿å›¾
      const calorieCtx = document.getElementById('calorie-chart').getContext('2d');
      new Chart(calorieCtx, {
        type: 'bar',
        data: {
          labels: ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'],
          datasets: [{
            label: 'æ‘„å…¥çƒ­é‡',
            data: [950, 1050, 850, 1100, 950, 1200, 950],
            backgroundColor: '#22c55e',
            borderRadius: 6
          }, {
            label: 'ç›®æ ‡çƒ­é‡',
            data: [1200, 1200, 1200, 1200, 1200, 1200, 1200],
            type: 'line',
            borderColor: '#16a34a',
            borderWidth: 2,
            borderDash: [5, 5],
            pointRadius: 0,
            fill: false
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                display: true,
                color: 'rgba(0, 0, 0, 0.05)'
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          }
        }
      });
      
      // è¥å…»åˆ†å¸ƒå›¾
      const nutritionCtx = document.getElementById('nutrition-chart').getContext('2d');
      new Chart(nutritionCtx, {
        type: 'doughnut',
        data: {
          labels: ['ç¢³æ°´åŒ–åˆç‰©', 'è›‹ç™½è´¨', 'è„‚è‚ª'],
          datasets: [{
            data: [50, 30, 20],
            backgroundColor: ['#3b82f6', '#a855f7', '#eab308'],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          cutout: '70%'
        }
      });
    }

    // å¯¼èˆªåˆ°æŒ‡å®šé¡µé¢
    function navigateToPage(pageId) {
      elements.navBtns.forEach(btn => {
        if (btn.getAttribute('data-page') === pageId) {
          btn.click();
        }
      });
    }

    // ç»‘å®šäº‹ä»¶
    function bindEvents() {
      // æ·»åŠ é¤é£ŸæŒ‰é’®
      elements.addMealBtn.addEventListener('click', () => {
        userData.selectedMealType = 'breakfast';
        navigateToPage('search-page');
      });
      
      // æ·»åŠ é£Ÿç‰©æŒ‰é’®ï¼ˆé¤é£Ÿç©ºçŠ¶æ€ï¼‰
      elements.addFoodBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const mealType = btn.getAttribute('data-meal');
          userData.selectedMealType = mealType;
          navigateToPage('search-page');
        });
      });
      
      // åˆ†ç±»ç­›é€‰æŒ‰é’®
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          // æ›´æ–°æŒ‰é’®çŠ¶æ€
          document.querySelectorAll('.category-btn').forEach(b => {
            b.classList.remove('bg-primary', 'text-white');
            b.classList.add('bg-gray-100', 'text-gray-700');
          });
          btn.classList.add('bg-primary', 'text-white');
          btn.classList.remove('bg-gray-100', 'text-gray-700');
          
          // ç­›é€‰é£Ÿç‰©
          const category = btn.textContent.trim();
          if (category === 'å…¨éƒ¨') {
            renderFoodCards(foodDatabase);
          } else {
            const filteredFoods = foodDatabase.filter(food => food.category === category);
            renderFoodCards(filteredFoods);
          }
        });
      });
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', init);
  </script>


</body></html>